var Microsoft;!function(t){var e;!function(t){"use strict";angular.module("features",["forecast","ui.bootstrap","ui.router","ngSanitize","ngAnimate"])}(e=t.Store||(t.Store={}))}(Microsoft||(Microsoft={}));var HungCao;!function(t){var e;!function(t){"use strict";angular.module("app",["components","features"])}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var Microsoft;!function(t){var e;!function(t){"use strict";angular.module("components",[])}(e=t.Store||(t.Store={}))}(Microsoft||(Microsoft={}));var HungCao;!function(t){var e;!function(t){"use strict";angular.module("forecast",[])}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var Microsoft;!function(t){var e;!function(t){var e=function(){function t(t,e,r){var i=this;this.configureRoutes=function(){i.registerState("forecast","/forecast","templates/features/five-days-forecast/forecast.html",HungCao.Apps.ForecastController),i.registerDefault("forecast")},this.registerState=function(t,e,r,n){var o={url:e,templateUrl:r,controller:n,controllerAs:"vm",reloadOnSearch:!1,requireADLogin:!0};i.$stateProvider.state(t,o)},this.registerDefault=function(t){i.$urlRouterProvider.otherwise(t)},this.$stateProvider=t,this.$urlRouterProvider=e,this.configureRoutes(),r.html5Mode({enabled:!0,requireBase:!0}).hashPrefix("!")}return t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],t}();angular.module("features").config(e)}(e=t.Store||(t.Store={}))}(Microsoft||(Microsoft={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t,e){e.html5Mode(!0)}return t.$inject=["$httpProvider","$locationProvider"],t}();angular.module("app").config(e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t){var e=this;this.loadConfig=function(){e.loader.importConfig(e.onLoadCompleted)},this.onLoadCompleted=function(t){t?e.loaded=!0:console.error("Unable to load configuration")},this.loader=t,this.loadConfig()}return t.$inject=["configLoader"],t}();angular.module("app").controller("AppController",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t,e){var r=this;this.onSuccess=function(t){r.forecastApiService.apiUrl=t.data.apiHost,r.forecastApiService.apiKey=t.data.apiKey,r.onLoadCompleted(!0)},this.onError=function(t){r.onLoadCompleted(!1)},this.apiService=t,this.forecastApiService=e}return t.prototype.importConfig=function(t){this.onLoadCompleted=t,this.apiService.getLocal("configuration/app.config.json").then(this.onSuccess,this.onError)},t.$inject=["apiService","forecastApiService"],t}();t.ConfigLoader=e,angular.module("app").service("configLoader",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t,e,r){this.$q=t,this.$http=e,this.$location=r}return t.prototype.getWithQueryParams=function(t,e){var r=this.execute("GET",t,e,this.$q.defer(),null);return r},t.prototype.getLocal=function(t){return this.$http.get(t)},t.prototype.execute=function(t,e,r,i,n){var o={method:t,url:e,data:n,params:r};return this.$http(o).then(function(t){i.resolve(t)},function(t){i.reject(t)}),i.promise},t.$inject=["$q","$http","$location"],t}();t.ApiService=e,angular.module("components").service("apiService",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(){this.convertToWeekDay=function(t){var e=new Array(7);return e[0]="Monday",e[1]="Tuesday",e[2]="Wednesday",e[3]="Thursday",e[4]="Friday",e[5]="Saturday",e[6]="Sunday",0===t.getDay()?"Sunday":e[t.getDay()-1]},this.convertToMonthDay=function(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=t.getDate(),i=t.getMonth();return e[i]+" "+r}}return t.$inject=[],t}();t.UtilitiesService=e,angular.module("components").service("utilitiesService",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(){var t=this;this.loadFromJson=function(e){for(var r in t)"function"!=typeof t[r]&&(t[r]=e[r])},this.convertCurrentTime=function(){if(t.time){var e=new Date(1e3*t.time);t.dateCurrentTime=e}},this.summary=null,this.icon=null,this.temperature=null,this.humidity=null,this.windSpeed=null,this.dewPoint=null,this.time=null}return t}();t.ForecastData=e}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},HungCao;!function(t){var e;!function(t){"use strict";var e=function(t){function e(){var e=this;t.call(this),this.convertMaxMinTime=function(){if(e.temperatureMinTime){var t=new Date(1e3*e.temperatureMinTime);e.dateTempMinTime=t}if(e.temperatureMaxTime){var t=new Date(1e3*e.temperatureMaxTime);e.dateTempMaxTime=t}},this.temperatureMin=null,this.temperatureMinTime=null,this.temperatureMax=null,this.temperatureMaxTime=null}return __extends(e,t),e}(t.ForecastData);t.DailyForecastData=e}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(){this.data=new Array}return t}();t.DailySummary=e}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t,e){var r=this;this.$q=t,this.apiService=e,this.get=function(t,e){r.apiUrl+r.apiKey+"/"+t+","+e;return r.apiService.getLocal("configuration/data.json")}}return t.$inject=["$q","apiService"],t}();t.ForecastApiService=e,angular.module("forecast").service("forecastApiService",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function e(e,r){var i=this;this.forecastApiService=e,this.utilitiesService=r,this.init=function(){i.forecastApiService.get("37.8267","-122.423").then(i.loadCompleted,i.loadError)},this.loadCompleted=function(e){var r=e.data;if(r.currently&&(i.currently.loadFromJson(r.currently),i.currently.convertCurrentTime(),i.currentWeekDayString=i.utilitiesService.convertToWeekDay(i.currently.dateCurrentTime),i.currentMonthDayString=i.utilitiesService.convertToMonthDay(i.currently.dateCurrentTime)),r.daily&&(i.dailySummary.summary=r.daily.summary,i.dailySummary.icon=r.daily.icon,r.daily.data))for(var n in r.daily.data){if(i.dailySummary.data.length===i.numberOfDays)break;var o=new t.DailyForecastData;o.loadFromJson(r.daily.data[n]),o.convertMaxMinTime(),o.convertCurrentTime(),i.dailySummary.data.push(o)}},this.loadError=function(t){},this.forecastApiService=e,this.dailySummary=new t.DailySummary,this.numberOfDays=5,this.currently=new t.ForecastData,this.utilitiesService=r}return e.prototype.$onInit=function(){this.dateModel=new Date,this.init()},e.$inject=["forecastApiService","utilitiesService"],e}();t.ForecastController=e,angular.module("forecast").controller("ForecastController",e)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));var HungCao;!function(t){var e;!function(t){"use strict";var e=function(){function t(t){this.utilitiesService=t,console.log(this.model),this.utilitiesService=t,this.currentWeekDayString=this.utilitiesService.convertToWeekDay(this.model.dateCurrentTime),this.currentMonthDayString=this.utilitiesService.convertToMonthDay(this.model.dateCurrentTime),this.displayMaxTemp=this.model.temperatureMax,this.displayMinTemp=this.model.temperatureMin,this.displayMaxTime=this.model.dateTempMaxTime.getHours(),this.displayMinTime=this.model.dateTempMinTime.getHours(),this.displayHumidity=Math.round(100*this.model.humidity)}return t.$inject=["utilitiesService"],t}();t.ForecastDaybox=e;var r=function(){function t(){this.controller=e,this.controllerAs="vm",this.bindings={model:"<"},this.templateUrl=""}return t}();t.ForecastDayboxComponentOptions=r;var i=new r;i.templateUrl="templates/features/five-days-forecast/components/forecast-day-box/templates/forecast-day-box.html",angular.module("forecast").component("forecastDayBox",i)}(e=t.Apps||(t.Apps={}))}(HungCao||(HungCao={}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJNaWNyb3NvZnQiLCJTdG9yZSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJIdW5nQ2FvIiwiQXBwcyIsIkZlYXR1cmVzQ29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIl90aGlzIiwidGhpcyIsImNvbmZpZ3VyZVJvdXRlcyIsInJlZ2lzdGVyU3RhdGUiLCJGb3JlY2FzdENvbnRyb2xsZXIiLCJyZWdpc3RlckRlZmF1bHQiLCJuYW1lIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3B0aW9ucyIsImNvbnRyb2xsZXJBcyIsInJlbG9hZE9uU2VhcmNoIiwicmVxdWlyZUFETG9naW4iLCJzdGF0ZSIsInJvdXRlIiwib3RoZXJ3aXNlIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwiaGFzaFByZWZpeCIsIiRpbmplY3QiLCJjb25maWciLCJDb25maWd1cmF0aW9uIiwiJGh0dHBQcm92aWRlciIsIkFwcENvbnRyb2xsZXIiLCJjb25maWdMb2FkZXIiLCJsb2FkQ29uZmlnIiwibG9hZGVyIiwiaW1wb3J0Q29uZmlnIiwib25Mb2FkQ29tcGxldGVkIiwic3VjY2VzcyIsImxvYWRlZCIsImNvbnNvbGUiLCJlcnJvciIsIkNvbmZpZ0xvYWRlciIsImFwaVNlcnZpY2UiLCJmb3JlY2FzdEFwaVNlcnZpY2UiLCJvblN1Y2Nlc3MiLCJyZXNwb25zZSIsImFwaVVybCIsImRhdGEiLCJhcGlIb3N0IiwiYXBpS2V5Iiwib25FcnJvciIsInByb3RvdHlwZSIsImdldExvY2FsIiwidGhlbiIsInNlcnZpY2UiLCJBcGlTZXJ2aWNlIiwiJHEiLCIkaHR0cCIsIiRsb2NhdGlvbiIsImdldFdpdGhRdWVyeVBhcmFtcyIsImFwaVBhdGgiLCJwYXJhbXMiLCJwcm9taXNlIiwiZXhlY3V0ZSIsImRlZmVyIiwicGF0aCIsImdldCIsImFwaUFjdGlvbiIsImFwaSIsImFyZ3MiLCJkZWZlcnJlZCIsIm1ldGhvZCIsInJlc29sdmUiLCJyZWFzb24iLCJyZWplY3QiLCJVdGlsaXRpZXNTZXJ2aWNlIiwiY29udmVydFRvV2Vla0RheSIsImRhdGUiLCJ3ZWVrZGF5IiwiQXJyYXkiLCJnZXREYXkiLCJjb252ZXJ0VG9Nb250aERheSIsIm1vbnRoTmFtZXMiLCJkYXkiLCJnZXREYXRlIiwibW9udGhJbmRleCIsImdldE1vbnRoIiwiRm9yZWNhc3REYXRhIiwibG9hZEZyb21Kc29uIiwicHJvcGVydHkiLCJjb252ZXJ0Q3VycmVudFRpbWUiLCJ0aW1lIiwiRGF0ZSIsImRhdGVDdXJyZW50VGltZSIsInN1bW1hcnkiLCJpY29uIiwidGVtcGVyYXR1cmUiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsImRld1BvaW50IiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwicCIsImhhc093blByb3BlcnR5IiwiT2JqZWN0IiwiY3JlYXRlIiwiRGFpbHlGb3JlY2FzdERhdGEiLCJfc3VwZXIiLCJjYWxsIiwiY29udmVydE1heE1pblRpbWUiLCJ0ZW1wZXJhdHVyZU1pblRpbWUiLCJkYXRlVGVtcE1pblRpbWUiLCJ0ZW1wZXJhdHVyZU1heFRpbWUiLCJkYXRlVGVtcE1heFRpbWUiLCJ0ZW1wZXJhdHVyZU1pbiIsInRlbXBlcmF0dXJlTWF4IiwiRGFpbHlTdW1tYXJ5IiwiRm9yZWNhc3RBcGlTZXJ2aWNlIiwibGF0IiwibG9uIiwidXRpbGl0aWVzU2VydmljZSIsImluaXQiLCJsb2FkQ29tcGxldGVkIiwibG9hZEVycm9yIiwiY3VycmVudGx5IiwiY3VycmVudFdlZWtEYXlTdHJpbmciLCJjdXJyZW50TW9udGhEYXlTdHJpbmciLCJkYWlseSIsImRhaWx5U3VtbWFyeSIsImxlbmd0aCIsIm51bWJlck9mRGF5cyIsImRhaWx5T2JqIiwicHVzaCIsIiRvbkluaXQiLCJkYXRlTW9kZWwiLCJGb3JlY2FzdERheWJveCIsImxvZyIsIm1vZGVsIiwiZGlzcGxheU1heFRlbXAiLCJkaXNwbGF5TWluVGVtcCIsImRpc3BsYXlNYXhUaW1lIiwiZ2V0SG91cnMiLCJkaXNwbGF5TWluVGltZSIsImRpc3BsYXlIdW1pZGl0eSIsIk1hdGgiLCJyb3VuZCIsIkZvcmVjYXN0RGF5Ym94Q29tcG9uZW50T3B0aW9ucyIsImJpbmRpbmdzIiwiY29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxZQUNKLFNBQVdBLEdBQ1AsR0FBSUMsSUFDSixTQUFXQSxHQUNQLFlBQ0FDLFNBQVFDLE9BQU8sWUFDWCxXQUNBLGVBQ0EsWUFDQSxhQUNBLGVBRUxGLEVBQVFELEVBQVVDLFFBQVVELEVBQVVDLFlBQzFDRCxZQUFjQSxjQUVqQixJQUFJSSxVQUNKLFNBQVdBLEdBQ1AsR0FBSUMsSUFDSixTQUFXQSxHQUNQLFlBQ0FILFNBQVFDLE9BQU8sT0FDWCxhQUNBLGNBRUxFLEVBQU9ELEVBQVFDLE9BQVNELEVBQVFDLFdBQ3BDRCxVQUFZQSxZQUVmLElBQUlKLFlBQ0osU0FBV0EsR0FDUCxHQUFJQyxJQUNKLFNBQVdBLEdBQ1AsWUFDQUMsU0FBUUMsT0FBTyxrQkFDaEJGLEVBQVFELEVBQVVDLFFBQVVELEVBQVVDLFlBQzFDRCxZQUFjQSxjQUVqQixJQUFJSSxVQUNKLFNBQVdBLEdBQ1AsR0FBSUMsSUFDSixTQUFXQSxHQUNQLFlBQ0FILFNBQVFDLE9BQU8sZ0JBQ2hCRSxFQUFPRCxFQUFRQyxPQUFTRCxFQUFRQyxXQUNwQ0QsVUFBWUEsWUFFZixJQUFJSixZQUNKLFNBQVdBLEdBQ1AsR0FBSUMsSUFDSixTQUFXQSxHQUNQLEdBQUlLLEdBQWtCLFdBQ2xCLFFBQVNBLEdBQWVDLEVBQWdCQyxFQUFvQkMsR0FDeEQsR0FBSUMsR0FBUUMsSUFDWkEsTUFBS0MsZ0JBQWtCLFdBQ25CRixFQUFNRyxjQUFjLFdBQVksWUFBYSxzREFBdURULFFBQVFDLEtBQUtTLG9CQUNqSEosRUFBTUssZ0JBQWdCLGFBRTFCSixLQUFLRSxjQUFnQixTQUFVRyxFQUFNQyxFQUFLQyxFQUFhQyxHQUNuRCxHQUFJ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c0ksZUFBaUJ0SSxLQUFLcUksTUFBTXRCLGVBQ2pDL0csS0FBS3VJLGVBQWlCdkksS0FBS3FJLE1BQU12QixlQUNqQzlHLEtBQUt3SSxlQUFpQnhJLEtBQUtxSSxNQUFNeEIsZ0JBQWdCNEIsV0FDakR6SSxLQUFLMEksZUFBaUIxSSxLQUFLcUksTUFBTTFCLGdCQUFnQjhCLFdBQ2pEekksS0FBSzJJLGdCQUFrQkMsS0FBS0MsTUFBNEIsSUFBdEI3SSxLQUFLcUksTUFBTTNDLFVBR2pELE1BREF5QyxHQUFlL0csU0FBVyxvQkFDbkIrRyxJQUVYekksR0FBS3lJLGVBQWlCQSxDQUN0QixJQUFJVyxHQUFrQyxXQUNsQyxRQUFTQSxLQUNMOUksS0FBS1EsV0FBYTJILEVBQ2xCbkksS0FBS1UsYUFBZSxLQUNwQlYsS0FBSytJLFVBQ0RWLE1BQU8sS0FFWHJJLEtBQUtPLFlBQWMsR0FFdkIsTUFBT3VJLEtBRVhwSixHQUFLb0osK0JBQWlDQSxDQUN0QyxJQUFJckksR0FBVSxHQUFJcUksRUFDbEJySSxHQUFRRixZQUFjLG9HQUN0QmhCLFFBQVFDLE9BQU8sWUFBWXdKLFVBQVUsaUJBQWtCdkksSUFDeERmLEVBQU9ELEVBQVFDLE9BQVNELEVBQVFDLFdBQ3BDRCxVQUFZQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTWljcm9zb2Z0O1xuKGZ1bmN0aW9uIChNaWNyb3NvZnQpIHtcbiAgICB2YXIgU3RvcmU7XG4gICAgKGZ1bmN0aW9uIChTdG9yZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdmZWF0dXJlcycsIFtcbiAgICAgICAgICAgICdmb3JlY2FzdCcsXG4gICAgICAgICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAgICAgJ25nU2FuaXRpemUnLFxuICAgICAgICAgICAgJ25nQW5pbWF0ZSdcbiAgICAgICAgXSk7XG4gICAgfSkoU3RvcmUgPSBNaWNyb3NvZnQuU3RvcmUgfHwgKE1pY3Jvc29mdC5TdG9yZSA9IHt9KSk7XG59KShNaWNyb3NvZnQgfHwgKE1pY3Jvc29mdCA9IHt9KSk7XG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICAgICAgICdjb21wb25lbnRzJyxcbiAgICAgICAgICAgICdmZWF0dXJlcycsXG4gICAgICAgIF0pO1xuICAgIH0pKEFwcHMgPSBIdW5nQ2FvLkFwcHMgfHwgKEh1bmdDYW8uQXBwcyA9IHt9KSk7XG59KShIdW5nQ2FvIHx8IChIdW5nQ2FvID0ge30pKTtcblxudmFyIE1pY3Jvc29mdDtcbihmdW5jdGlvbiAoTWljcm9zb2Z0KSB7XG4gICAgdmFyIFN0b3JlO1xuICAgIChmdW5jdGlvbiAoU3RvcmUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY29tcG9uZW50cycsIFtdKTtcbiAgICB9KShTdG9yZSA9IE1pY3Jvc29mdC5TdG9yZSB8fCAoTWljcm9zb2Z0LlN0b3JlID0ge30pKTtcbn0pKE1pY3Jvc29mdCB8fCAoTWljcm9zb2Z0ID0ge30pKTtcblxudmFyIEh1bmdDYW87XG4oZnVuY3Rpb24gKEh1bmdDYW8pIHtcbiAgICB2YXIgQXBwcztcbiAgICAoZnVuY3Rpb24gKEFwcHMpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9yZWNhc3QnLCBbXSk7XG4gICAgfSkoQXBwcyA9IEh1bmdDYW8uQXBwcyB8fCAoSHVuZ0Nhby5BcHBzID0ge30pKTtcbn0pKEh1bmdDYW8gfHwgKEh1bmdDYW8gPSB7fSkpO1xuXG52YXIgTWljcm9zb2Z0O1xuKGZ1bmN0aW9uIChNaWNyb3NvZnQpIHtcbiAgICB2YXIgU3RvcmU7XG4gICAgKGZ1bmN0aW9uIChTdG9yZSkge1xuICAgICAgICB2YXIgRmVhdHVyZXNDb25maWcgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gRmVhdHVyZXNDb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlndXJlUm91dGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RlclN0YXRlKCdmb3JlY2FzdCcsICcvZm9yZWNhc3QnLCAndGVtcGxhdGVzL2ZlYXR1cmVzL2ZpdmUtZGF5cy1mb3JlY2FzdC9mb3JlY2FzdC5odG1sJywgSHVuZ0Nhby5BcHBzLkZvcmVjYXN0Q29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lzdGVyRGVmYXVsdCgnZm9yZWNhc3QnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdGF0ZSA9IGZ1bmN0aW9uIChuYW1lLCB1cmwsIHRlbXBsYXRlVXJsLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogdGVtcGxhdGVVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBjb250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkT25TZWFyY2g6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZUFETG9naW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0YXRlUHJvdmlkZXIuc3RhdGUobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRGVmYXVsdCA9IGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKHJvdXRlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuJHN0YXRlUHJvdmlkZXIgPSAkc3RhdGVQcm92aWRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLiR1cmxSb3V0ZXJQcm92aWRlciA9ICR1cmxSb3V0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVJvdXRlcygpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVCYXNlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSkuaGFzaFByZWZpeCgnIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRmVhdHVyZXNDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJ107XG4gICAgICAgICAgICByZXR1cm4gRmVhdHVyZXNDb25maWc7XG4gICAgICAgIH0oKSk7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdmZWF0dXJlcycpLmNvbmZpZyhGZWF0dXJlc0NvbmZpZyk7XG4gICAgfSkoU3RvcmUgPSBNaWNyb3NvZnQuU3RvcmUgfHwgKE1pY3Jvc29mdC5TdG9yZSA9IHt9KSk7XG59KShNaWNyb3NvZnQgfHwgKE1pY3Jvc29mdCA9IHt9KSk7XG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIENvbmZpZ3VyYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQ29uZmlndXJhdGlvbigkaHR0cFByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvbmZpZ3VyYXRpb24uJGluamVjdCA9IFsnJGh0dHBQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlciddO1xuICAgICAgICAgICAgcmV0dXJuIENvbmZpZ3VyYXRpb247XG4gICAgICAgIH0oKSk7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoQ29uZmlndXJhdGlvbik7XG4gICAgfSkoQXBwcyA9IEh1bmdDYW8uQXBwcyB8fCAoSHVuZ0Nhby5BcHBzID0ge30pKTtcbn0pKEh1bmdDYW8gfHwgKEh1bmdDYW8gPSB7fSkpO1xuXG52YXIgSHVuZ0NhbztcbihmdW5jdGlvbiAoSHVuZ0Nhbykge1xuICAgIHZhciBBcHBzO1xuICAgIChmdW5jdGlvbiAoQXBwcykge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciBBcHBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIEFwcENvbnRyb2xsZXIoY29uZmlnTG9hZGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlci5pbXBvcnRDb25maWcoX3RoaXMub25Mb2FkQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMub25Mb2FkQ29tcGxldGVkID0gZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gbG9hZCBjb25maWd1cmF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVyID0gY29uZmlnTG9hZGVyO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbmZpZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQXBwQ29udHJvbGxlci4kaW5qZWN0ID0gWydjb25maWdMb2FkZXInXTtcbiAgICAgICAgICAgIHJldHVybiBBcHBDb250cm9sbGVyO1xuICAgICAgICB9KCkpO1xuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIEFwcENvbnRyb2xsZXIpO1xuICAgIH0pKEFwcHMgPSBIdW5nQ2FvLkFwcHMgfHwgKEh1bmdDYW8uQXBwcyA9IHt9KSk7XG59KShIdW5nQ2FvIHx8IChIdW5nQ2FvID0ge30pKTtcblxudmFyIEh1bmdDYW87XG4oZnVuY3Rpb24gKEh1bmdDYW8pIHtcbiAgICB2YXIgQXBwcztcbiAgICAoZnVuY3Rpb24gKEFwcHMpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICAvL1RoaXMgY2xhc3Mgd2lsbCBsb2FkIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3NcbiAgICAgICAgdmFyIENvbmZpZ0xvYWRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBDb25maWdMb2FkZXIoYXBpU2VydmljZSwgZm9yZWNhc3RBcGlTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb3JlY2FzdEFwaVNlcnZpY2UuYXBpVXJsID0gcmVzcG9uc2UuZGF0YS5hcGlIb3N0O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb3JlY2FzdEFwaVNlcnZpY2UuYXBpS2V5ID0gcmVzcG9uc2UuZGF0YS5hcGlLZXk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uTG9hZENvbXBsZXRlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMub25FcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkxvYWRDb21wbGV0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5hcGlTZXJ2aWNlID0gYXBpU2VydmljZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmVjYXN0QXBpU2VydmljZSA9IGZvcmVjYXN0QXBpU2VydmljZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvbmZpZ0xvYWRlci5wcm90b3R5cGUuaW1wb3J0Q29uZmlnID0gZnVuY3Rpb24gKG9uTG9hZENvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25Mb2FkQ29tcGxldGVkID0gb25Mb2FkQ29tcGxldGVkO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBpU2VydmljZS5nZXRMb2NhbCgnY29uZmlndXJhdGlvbi9hcHAuY29uZmlnLmpzb24nKS50aGVuKHRoaXMub25TdWNjZXNzLCB0aGlzLm9uRXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbmZpZ0xvYWRlci4kaW5qZWN0ID0gWydhcGlTZXJ2aWNlJywgJ2ZvcmVjYXN0QXBpU2VydmljZSddO1xuICAgICAgICAgICAgcmV0dXJuIENvbmZpZ0xvYWRlcjtcbiAgICAgICAgfSgpKTtcbiAgICAgICAgQXBwcy5Db25maWdMb2FkZXIgPSBDb25maWdMb2FkZXI7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5zZXJ2aWNlKCdjb25maWdMb2FkZXInLCBDb25maWdMb2FkZXIpO1xuICAgIH0pKEFwcHMgPSBIdW5nQ2FvLkFwcHMgfHwgKEh1bmdDYW8uQXBwcyA9IHt9KSk7XG59KShIdW5nQ2FvIHx8IChIdW5nQ2FvID0ge30pKTtcblxudmFyIEh1bmdDYW87XG4oZnVuY3Rpb24gKEh1bmdDYW8pIHtcbiAgICB2YXIgQXBwcztcbiAgICAoZnVuY3Rpb24gKEFwcHMpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgQXBpU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBBcGlTZXJ2aWNlKCRxLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcSA9ICRxO1xuICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcbiAgICAgICAgICAgICAgICB0aGlzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFwaVNlcnZpY2UucHJvdG90eXBlLmdldFdpdGhRdWVyeVBhcmFtcyA9IGZ1bmN0aW9uIChhcGlQYXRoLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZXhlY3V0ZSgnR0VUJywgYXBpUGF0aCwgcGFyYW1zLCB0aGlzLiRxLmRlZmVyKCksIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEFwaVNlcnZpY2UucHJvdG90eXBlLmdldExvY2FsID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQocGF0aCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQXBpU2VydmljZS5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChhcGlBY3Rpb24sIGFwaSwgYXJncywgZGVmZXJyZWQsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGFwaUFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBhcGksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogYXJnc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy4kaHR0cChjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQXBpU2VydmljZS4kaW5qZWN0ID0gWyckcScsICckaHR0cCcsICckbG9jYXRpb24nXTtcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlO1xuICAgICAgICB9KCkpO1xuICAgICAgICBBcHBzLkFwaVNlcnZpY2UgPSBBcGlTZXJ2aWNlO1xuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY29tcG9uZW50cycpLnNlcnZpY2UoJ2FwaVNlcnZpY2UnLCBBcGlTZXJ2aWNlKTtcbiAgICB9KShBcHBzID0gSHVuZ0Nhby5BcHBzIHx8IChIdW5nQ2FvLkFwcHMgPSB7fSkpO1xufSkoSHVuZ0NhbyB8fCAoSHVuZ0NhbyA9IHt9KSk7XG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIFV0aWxpdGllc1NlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gVXRpbGl0aWVzU2VydmljZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRUb1dlZWtEYXkgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2Vla2RheSA9IG5ldyBBcnJheSg3KTtcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheVswXSA9IFwiTW9uZGF5XCI7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXlbMV0gPSBcIlR1ZXNkYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheVsyXSA9IFwiV2VkbmVzZGF5XCI7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXlbM10gPSBcIlRodXJzZGF5XCI7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXlbNF0gPSBcIkZyaWRheVwiO1xuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5WzVdID0gXCJTYXR1cmRheVwiO1xuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5WzZdID0gXCJTdW5kYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RGF5KCkgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJTdW5kYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXlbZGF0ZS5nZXREYXkoKSAtIDFdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VG9Nb250aERheSA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb250aE5hbWVzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJOb3ZcIiwgXCJEZWNcIlxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb250aEluZGV4ID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9udGhOYW1lc1ttb250aEluZGV4XSArICcgJyArIGRheTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVXRpbGl0aWVzU2VydmljZS4kaW5qZWN0ID0gW107XG4gICAgICAgICAgICByZXR1cm4gVXRpbGl0aWVzU2VydmljZTtcbiAgICAgICAgfSgpKTtcbiAgICAgICAgQXBwcy5VdGlsaXRpZXNTZXJ2aWNlID0gVXRpbGl0aWVzU2VydmljZTtcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2NvbXBvbmVudHMnKS5zZXJ2aWNlKCd1dGlsaXRpZXNTZXJ2aWNlJywgVXRpbGl0aWVzU2VydmljZSk7XG4gICAgfSkoQXBwcyA9IEh1bmdDYW8uQXBwcyB8fCAoSHVuZ0Nhby5BcHBzID0ge30pKTtcbn0pKEh1bmdDYW8gfHwgKEh1bmdDYW8gPSB7fSkpO1xuXG52YXIgSHVuZ0NhbztcbihmdW5jdGlvbiAoSHVuZ0Nhbykge1xuICAgIHZhciBBcHBzO1xuICAgIChmdW5jdGlvbiAoQXBwcykge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciBGb3JlY2FzdERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gRm9yZWNhc3REYXRhKCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRnJvbUpzb24gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpc1twcm9wZXJ0eV0gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzW3Byb3BlcnR5XSA9IGRhdGFbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRDdXJyZW50VGltZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoX3RoaXMudGltZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0ZUN1cnJlbnRUaW1lID0gZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy9kZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICAgICAgdGhpcy5zdW1tYXJ5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmljb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuaHVtaWRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMud2luZFNwZWVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmRld1BvaW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEZvcmVjYXN0RGF0YTtcbiAgICAgICAgfSgpKTtcbiAgICAgICAgQXBwcy5Gb3JlY2FzdERhdGEgPSBGb3JlY2FzdERhdGE7XG4gICAgfSkoQXBwcyA9IEh1bmdDYW8uQXBwcyB8fCAoSHVuZ0Nhby5BcHBzID0ge30pKTtcbn0pKEh1bmdDYW8gfHwgKEh1bmdDYW8gPSB7fSkpO1xuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIERhaWx5Rm9yZWNhc3REYXRhID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgICAgIF9fZXh0ZW5kcyhEYWlseUZvcmVjYXN0RGF0YSwgX3N1cGVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIERhaWx5Rm9yZWNhc3REYXRhKCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0TWF4TWluVGltZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRlbXBlcmF0dXJlTWluVGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShfdGhpcy50ZW1wZXJhdHVyZU1pblRpbWUgKiAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGVUZW1wTWluVGltZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRlbXBlcmF0dXJlTWF4VGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShfdGhpcy50ZW1wZXJhdHVyZU1heFRpbWUgKiAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGVUZW1wTWF4VGltZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGVyYXR1cmVNaW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGVyYXR1cmVNaW5UaW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBlcmF0dXJlTWF4ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBlcmF0dXJlTWF4VGltZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRGFpbHlGb3JlY2FzdERhdGE7XG4gICAgICAgIH0oQXBwcy5Gb3JlY2FzdERhdGEpKTtcbiAgICAgICAgQXBwcy5EYWlseUZvcmVjYXN0RGF0YSA9IERhaWx5Rm9yZWNhc3REYXRhO1xuICAgIH0pKEFwcHMgPSBIdW5nQ2FvLkFwcHMgfHwgKEh1bmdDYW8uQXBwcyA9IHt9KSk7XG59KShIdW5nQ2FvIHx8IChIdW5nQ2FvID0ge30pKTtcblxudmFyIEh1bmdDYW87XG4oZnVuY3Rpb24gKEh1bmdDYW8pIHtcbiAgICB2YXIgQXBwcztcbiAgICAoZnVuY3Rpb24gKEFwcHMpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgRGFpbHlTdW1tYXJ5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIERhaWx5U3VtbWFyeSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBEYWlseVN1bW1hcnk7XG4gICAgICAgIH0oKSk7XG4gICAgICAgIEFwcHMuRGFpbHlTdW1tYXJ5ID0gRGFpbHlTdW1tYXJ5O1xuICAgIH0pKEFwcHMgPSBIdW5nQ2FvLkFwcHMgfHwgKEh1bmdDYW8uQXBwcyA9IHt9KSk7XG59KShIdW5nQ2FvIHx8IChIdW5nQ2FvID0ge30pKTtcblxuXG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIEZvcmVjYXN0QXBpU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBGb3JlY2FzdEFwaVNlcnZpY2UoJHEsIGFwaVNlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwaVNlcnZpY2UgPSBhcGlTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGxhdCwgbG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcGlQYXRoID0gX3RoaXMuYXBpVXJsICsgX3RoaXMuYXBpS2V5ICsgXCIvXCIgKyBsYXQgKyBcIixcIiArIGxvbjtcbiAgICAgICAgICAgICAgICAgICAgLy9CZWNhdXNlIG9mIENPUlMgaXNzdWUgd2Ugd2lsbCBub3QgY2FsbCBhcGkgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gdGhpcy5hcGlTZXJ2aWNlLmdldFdpdGhRdWVyeVBhcmFtcyhhcGlQYXRoLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFwaVNlcnZpY2UuZ2V0TG9jYWwoJ2NvbmZpZ3VyYXRpb24vZGF0YS5qc29uJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEZvcmVjYXN0QXBpU2VydmljZS4kaW5qZWN0ID0gWyckcScsICdhcGlTZXJ2aWNlJ107XG4gICAgICAgICAgICByZXR1cm4gRm9yZWNhc3RBcGlTZXJ2aWNlO1xuICAgICAgICB9KCkpO1xuICAgICAgICBBcHBzLkZvcmVjYXN0QXBpU2VydmljZSA9IEZvcmVjYXN0QXBpU2VydmljZTtcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2ZvcmVjYXN0Jykuc2VydmljZSgnZm9yZWNhc3RBcGlTZXJ2aWNlJywgRm9yZWNhc3RBcGlTZXJ2aWNlKTtcbiAgICB9KShBcHBzID0gSHVuZ0Nhby5BcHBzIHx8IChIdW5nQ2FvLkFwcHMgPSB7fSkpO1xufSkoSHVuZ0NhbyB8fCAoSHVuZ0NhbyA9IHt9KSk7XG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIEZvcmVjYXN0Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBGb3JlY2FzdENvbnRyb2xsZXIoZm9yZWNhc3RBcGlTZXJ2aWNlLCB1dGlsaXRpZXNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmVjYXN0QXBpU2VydmljZSA9IGZvcmVjYXN0QXBpU2VydmljZTtcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxpdGllc1NlcnZpY2UgPSB1dGlsaXRpZXNTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9yZWNhc3RBcGlTZXJ2aWNlLmdldChcIjM3LjgyNjdcIiwgXCItMTIyLjQyM1wiKS50aGVuKF90aGlzLmxvYWRDb21wbGV0ZWQsIF90aGlzLmxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDb21wbGV0ZWQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jdXJyZW50bHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRseS5sb2FkRnJvbUpzb24oZGF0YS5jdXJyZW50bHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudGx5LmNvbnZlcnRDdXJyZW50VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudFdlZWtEYXlTdHJpbmcgPSBfdGhpcy51dGlsaXRpZXNTZXJ2aWNlLmNvbnZlcnRUb1dlZWtEYXkoX3RoaXMuY3VycmVudGx5LmRhdGVDdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdXJyZW50TW9udGhEYXlTdHJpbmcgPSBfdGhpcy51dGlsaXRpZXNTZXJ2aWNlLmNvbnZlcnRUb01vbnRoRGF5KF90aGlzLmN1cnJlbnRseS5kYXRlQ3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhaWx5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYWlseVN1bW1hcnkuc3VtbWFyeSA9IGRhdGEuZGFpbHkuc3VtbWFyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhaWx5U3VtbWFyeS5pY29uID0gZGF0YS5kYWlseS5pY29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGFpbHkuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGRhaWx5IGluIGRhdGEuZGFpbHkuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZGFpbHlTdW1tYXJ5LmRhdGEubGVuZ3RoID09PSBfdGhpcy5udW1iZXJPZkRheXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYWlseU9iaiA9IG5ldyBBcHBzLkRhaWx5Rm9yZWNhc3REYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhaWx5T2JqLmxvYWRGcm9tSnNvbihkYXRhLmRhaWx5LmRhdGFbZGFpbHldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHlPYmouY29udmVydE1heE1pblRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHlPYmouY29udmVydEN1cnJlbnRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhaWx5U3VtbWFyeS5kYXRhLnB1c2goZGFpbHlPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yZWNhc3RBcGlTZXJ2aWNlID0gZm9yZWNhc3RBcGlTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGFpbHlTdW1tYXJ5ID0gbmV3IEFwcHMuRGFpbHlTdW1tYXJ5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5udW1iZXJPZkRheXMgPSA1O1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5ID0gbmV3IEFwcHMuRm9yZWNhc3REYXRhKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51dGlsaXRpZXNTZXJ2aWNlID0gdXRpbGl0aWVzU2VydmljZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEZvcmVjYXN0Q29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVNb2RlbCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgRm9yZWNhc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJ2ZvcmVjYXN0QXBpU2VydmljZScsICd1dGlsaXRpZXNTZXJ2aWNlJ107XG4gICAgICAgICAgICByZXR1cm4gRm9yZWNhc3RDb250cm9sbGVyO1xuICAgICAgICB9KCkpO1xuICAgICAgICBBcHBzLkZvcmVjYXN0Q29udHJvbGxlciA9IEZvcmVjYXN0Q29udHJvbGxlcjtcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2ZvcmVjYXN0JykuY29udHJvbGxlcignRm9yZWNhc3RDb250cm9sbGVyJywgRm9yZWNhc3RDb250cm9sbGVyKTtcbiAgICB9KShBcHBzID0gSHVuZ0Nhby5BcHBzIHx8IChIdW5nQ2FvLkFwcHMgPSB7fSkpO1xufSkoSHVuZ0NhbyB8fCAoSHVuZ0NhbyA9IHt9KSk7XG5cbnZhciBIdW5nQ2FvO1xuKGZ1bmN0aW9uIChIdW5nQ2FvKSB7XG4gICAgdmFyIEFwcHM7XG4gICAgKGZ1bmN0aW9uIChBcHBzKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgdmFyIEZvcmVjYXN0RGF5Ym94ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIEZvcmVjYXN0RGF5Ym94KHV0aWxpdGllc1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxpdGllc1NlcnZpY2UgPSB1dGlsaXRpZXNTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWwpO1xuICAgICAgICAgICAgICAgIHRoaXMudXRpbGl0aWVzU2VydmljZSA9IHV0aWxpdGllc1NlcnZpY2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50V2Vla0RheVN0cmluZyA9IHRoaXMudXRpbGl0aWVzU2VydmljZS5jb252ZXJ0VG9XZWVrRGF5KHRoaXMubW9kZWwuZGF0ZUN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aERheVN0cmluZyA9IHRoaXMudXRpbGl0aWVzU2VydmljZS5jb252ZXJ0VG9Nb250aERheSh0aGlzLm1vZGVsLmRhdGVDdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWF4VGVtcCA9IHRoaXMubW9kZWwudGVtcGVyYXR1cmVNYXg7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWluVGVtcCA9IHRoaXMubW9kZWwudGVtcGVyYXR1cmVNaW47XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWF4VGltZSA9IHRoaXMubW9kZWwuZGF0ZVRlbXBNYXhUaW1lLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWluVGltZSA9IHRoaXMubW9kZWwuZGF0ZVRlbXBNaW5UaW1lLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SHVtaWRpdHkgPSBNYXRoLnJvdW5kKHRoaXMubW9kZWwuaHVtaWRpdHkgKiAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRm9yZWNhc3REYXlib3guJGluamVjdCA9IFsndXRpbGl0aWVzU2VydmljZSddO1xuICAgICAgICAgICAgcmV0dXJuIEZvcmVjYXN0RGF5Ym94O1xuICAgICAgICB9KCkpO1xuICAgICAgICBBcHBzLkZvcmVjYXN0RGF5Ym94ID0gRm9yZWNhc3REYXlib3g7XG4gICAgICAgIHZhciBGb3JlY2FzdERheWJveENvbXBvbmVudE9wdGlvbnMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gRm9yZWNhc3REYXlib3hDb21wb25lbnRPcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciA9IEZvcmVjYXN0RGF5Ym94O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlckFzID0gJ3ZtJztcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogJzwnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlVXJsID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRm9yZWNhc3REYXlib3hDb21wb25lbnRPcHRpb25zO1xuICAgICAgICB9KCkpO1xuICAgICAgICBBcHBzLkZvcmVjYXN0RGF5Ym94Q29tcG9uZW50T3B0aW9ucyA9IEZvcmVjYXN0RGF5Ym94Q29tcG9uZW50T3B0aW9ucztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBuZXcgRm9yZWNhc3REYXlib3hDb21wb25lbnRPcHRpb25zKCk7XG4gICAgICAgIG9wdGlvbnMudGVtcGxhdGVVcmwgPSAndGVtcGxhdGVzL2ZlYXR1cmVzL2ZpdmUtZGF5cy1mb3JlY2FzdC9jb21wb25lbnRzL2ZvcmVjYXN0LWRheS1ib3gvdGVtcGxhdGVzL2ZvcmVjYXN0LWRheS1ib3guaHRtbCc7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdmb3JlY2FzdCcpLmNvbXBvbmVudCgnZm9yZWNhc3REYXlCb3gnLCBvcHRpb25zKTtcbiAgICB9KShBcHBzID0gSHVuZ0Nhby5BcHBzIHx8IChIdW5nQ2FvLkFwcHMgPSB7fSkpO1xufSkoSHVuZ0NhbyB8fCAoSHVuZ0NhbyA9IHt9KSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
